[package]
name = "pi_wasm_engine"
version = "0.1.0"
authors = ["suncy <suncy@yineng.com>"]
edition = "2018"

[lib]
crate-type = ["cdylib"]

[features]
default = ["pi_js_export", "log/release_max_level_warn"]
# default = ["pi_js_export", "bevy/trace_chrome", "pi_bevy_render_plugin/trace", "pi_bevy_log/tracing_chrome_wasm", "pi_export_gui/trace", "tracing/release_max_level_warn"]
pi_js_export = []

[dependencies]
pi_export_gui = { path = "../gui", default-features=false, features=["record"] }
# pi_export_astar = { path = "../astar"}
pi_export_base = { path = "../base"}
pi_spine_export = { path = "../pi_spine_export"}
# pi_export_quad_tree = { path = "../quad_tree"}
scene3d_export = { path = "../scene3d" }
pi_web_logger = {git = "http://ser.yinengyun.com:10082/tech/pi_web_logger.git"}

# wasm-bindgen = { version = "0.2"}
wasm-bindgen = { version = "=0.2.87" }
bevy_ecs = "0.11"


# log
# log = "0.4"
# log={version = "0.4", features=["release_max_level_warn", "max_level_warn"]}
log = {version = "0.4", features=["release_max_level_warn"]}
# tracing = { version = "0.1", features=["release_max_level_warn"]}
# features = ["release_max_level_warn", "max_level_warn"] 

# 添加webgl feature
wgpu = {version = "0.1", registry = "yn", package="pi_wgpu", features=["wgpu"]}
wgpu1 = { version = "0.16", package = "wgpu", default-features = false, features = ["glsl", "webgl"] }
# wgpu = { version = "0.16", default-features = false, features = ["glsl", "wgc"] }
pi_render = { version = "0.1", registry = "yn", features=["webgl"] }
pi_bevy_render_plugin = { version = "0.1", registry = "yn", features=["webgl"]}
pi_bevy_log = {version = "0.1", registry = "yn"}


getrandom = { version = "0.2", features = ["js"] }

[target.'cfg(target_arch = "wasm32")'.dependencies]
pi-async-rt = {version = "0.1", features = ["serial"]}
uuid = { version = "1", features = ["js"] }


# `wasm-opt` is on by default in for the release profile, but it can be
# disabled by setting it to `false`
[package.metadata.wasm-pack.profile.release]
wasm-opt = ['-O4']


